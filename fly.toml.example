# Fly.io configuration for Agent Box
# See https://fly.io/docs/reference/configuration/
#
# DO NOT EDIT THIS FILE DIRECTLY
# Run: ./scripts/fly-init.sh <your-app-name> [region]
# This generates fly.toml with your settings

app = "{{APP_NAME}}"
primary_region = "{{REGION}}"

[build]
  dockerfile = "Dockerfile"

# No public HTTP services - access via Tailscale only
# Uncomment below if you want public SSH access (not recommended)
# [[services]]
#   internal_port = 2222
#   protocol = "tcp"
#   [[services.ports]]
#     port = 2222

[env]
  # Used as Tailscale hostname
  FLY_APP_NAME = "{{APP_NAME}}"
  # Default ntfy topic (override with secrets)
  NTFY_TOPIC = "{{APP_NAME}}-notifications"

# Mount persistent volume
[mounts]
  source = "agent_data"
  destination = "/data"
  initial_size = "10gb"

# Machine configuration
[[vm]]
  size = "shared-cpu-2x"
  memory = "2gb"

# Process configuration
[processes]
  app = ""

# Metrics (optional)
[metrics]
  port = 9091
  path = "/metrics"
